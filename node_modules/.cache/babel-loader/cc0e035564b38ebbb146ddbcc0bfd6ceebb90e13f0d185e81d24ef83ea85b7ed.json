{"ast":null,"code":"const verify = async setData => {\n  const response = await fetch(\"http://localhost/TP2PHP2/Auth/verify.php\", {\n    method: 'GET',\n    credentials: 'include'\n  });\n  await response.json().then(data => {\n    setData(data);\n  });\n};\nconst loginFct = async (data, setErr, navigate) => {\n  const formData = new FormData();\n  if (data.Email !== '' || data.Password !== '') {\n    formData.append('Email', data.Email);\n    formData.append('Password', data.Password);\n    const response = await fetch(\"http://localhost/TP2PHP2/Auth/login.php\", {\n      method: 'POST',\n      body: formData,\n      credentials: 'include'\n    });\n    await response.text().then(objct => {\n      if (objct === 'admin') navigate('/admin');else if (objct === 'client') navigate('/board');else setErr(objct);\n    });\n  } else {\n    setErr('Ne laissez pas de champs vides!');\n  }\n};\nconst logout = async navigate => {\n  const response = await fetch(\"http://localhost/TP2PHP2/Auth/logout.php\", {\n    method: \"GET\",\n    credentials: 'include'\n  });\n  await response.text().then(data => {\n    if (data === 'true') navigate(\"/\");\n  });\n};\nmodule.exports = {\n  loginFct,\n  logout,\n  verify\n};","map":{"version":3,"names":["verify","setData","response","fetch","method","credentials","json","then","data","loginFct","setErr","navigate","formData","FormData","Email","Password","append","body","text","objct","logout","module","exports"],"sources":["C:/Users/simob/Desktop/tp2_php - Copie/tp2_php/src/Controllers/login.js"],"sourcesContent":["\r\nconst verify=async(setData)=>{\r\n    const response=await fetch(\"http://localhost/TP2PHP2/Auth/verify.php\",{\r\n        method:'GET',\r\n        credentials:'include'\r\n    });\r\n    await response.json().then(\r\n        (data)=>{\r\n            setData(data)\r\n        }\r\n    )\r\n\r\n}\r\n\r\nconst loginFct=async(data,setErr,navigate)=>{\r\n    const formData = new FormData();\r\n\r\n    if(data.Email !== '' || data.Password !== ''){\r\n        formData.append('Email',data.Email);\r\n        formData.append('Password',data.Password);\r\n        \r\n        const response=await fetch(\"http://localhost/TP2PHP2/Auth/login.php\",{\r\n            method:'POST',\r\n            body:formData,\r\n            credentials:'include'\r\n        })\r\n        await response.text().then(\r\n            (objct)=>{\r\n                if(objct==='admin')\r\n                    navigate('/admin');\r\n                else if(objct==='client')\r\n                    navigate('/board');\r\n                else\r\n                    setErr(objct)\r\n            }\r\n        )\r\n    }else{\r\n        setErr('Ne laissez pas de champs vides!')\r\n    }\r\n}\r\n\r\nconst logout=async(navigate)=>{\r\n    const response=await fetch(\"http://localhost/TP2PHP2/Auth/logout.php\",{\r\n        method:\"GET\",\r\n        credentials:'include'\r\n    })\r\n    await response.text().then(\r\n        (data)=>{\r\n            if(data === 'true')\r\n                navigate(\"/\")\r\n        }\r\n    )\r\n}\r\nmodule.exports={\r\n    loginFct,\r\n    logout,\r\n    verify\r\n}"],"mappings":"AACA,MAAMA,MAAM,GAAC,MAAMC,OAAO,IAAG;EACzB,MAAMC,QAAQ,GAAC,MAAMC,KAAK,CAAC,0CAA0C,EAAC;IAClEC,MAAM,EAAC,KAAK;IACZC,WAAW,EAAC;EAChB,CAAC,CAAC;EACF,MAAMH,QAAQ,CAACI,IAAI,CAAC,CAAC,CAACC,IAAI,CACrBC,IAAI,IAAG;IACJP,OAAO,CAACO,IAAI,CAAC;EACjB,CACJ,CAAC;AAEL,CAAC;AAED,MAAMC,QAAQ,GAAC,MAAAA,CAAMD,IAAI,EAACE,MAAM,EAACC,QAAQ,KAAG;EACxC,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;EAE/B,IAAGL,IAAI,CAACM,KAAK,KAAK,EAAE,IAAIN,IAAI,CAACO,QAAQ,KAAK,EAAE,EAAC;IACzCH,QAAQ,CAACI,MAAM,CAAC,OAAO,EAACR,IAAI,CAACM,KAAK,CAAC;IACnCF,QAAQ,CAACI,MAAM,CAAC,UAAU,EAACR,IAAI,CAACO,QAAQ,CAAC;IAEzC,MAAMb,QAAQ,GAAC,MAAMC,KAAK,CAAC,yCAAyC,EAAC;MACjEC,MAAM,EAAC,MAAM;MACba,IAAI,EAACL,QAAQ;MACbP,WAAW,EAAC;IAChB,CAAC,CAAC;IACF,MAAMH,QAAQ,CAACgB,IAAI,CAAC,CAAC,CAACX,IAAI,CACrBY,KAAK,IAAG;MACL,IAAGA,KAAK,KAAG,OAAO,EACdR,QAAQ,CAAC,QAAQ,CAAC,CAAC,KAClB,IAAGQ,KAAK,KAAG,QAAQ,EACpBR,QAAQ,CAAC,QAAQ,CAAC,CAAC,KAEnBD,MAAM,CAACS,KAAK,CAAC;IACrB,CACJ,CAAC;EACL,CAAC,MAAI;IACDT,MAAM,CAAC,iCAAiC,CAAC;EAC7C;AACJ,CAAC;AAED,MAAMU,MAAM,GAAC,MAAMT,QAAQ,IAAG;EAC1B,MAAMT,QAAQ,GAAC,MAAMC,KAAK,CAAC,0CAA0C,EAAC;IAClEC,MAAM,EAAC,KAAK;IACZC,WAAW,EAAC;EAChB,CAAC,CAAC;EACF,MAAMH,QAAQ,CAACgB,IAAI,CAAC,CAAC,CAACX,IAAI,CACrBC,IAAI,IAAG;IACJ,IAAGA,IAAI,KAAK,MAAM,EACdG,QAAQ,CAAC,GAAG,CAAC;EACrB,CACJ,CAAC;AACL,CAAC;AACDU,MAAM,CAACC,OAAO,GAAC;EACXb,QAAQ;EACRW,MAAM;EACNpB;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}